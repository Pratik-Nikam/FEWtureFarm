<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Netlogo Simulation</title>
    <link rel="icon" href="../static/img/Farm-Features.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://demo.voidcoders.com/htmldemo/fitgear/main-files/assets/css/animate.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../static/NetlogoInputV1.css" />
  
    <style>
        .loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            display: none;
        }

        .blur {
            filter: blur(5px);
            pointer-events: none;
        }

        .tabs-section {
            margin-top: 20px;
        }

        .tabs-section .nav-tabs {
            justify-content: center;
        }

        .tabs-section .nav-item {
            margin-bottom: -1px;
        }

        .tabs-section .nav-link {
            border: 1px solid transparent;
            border-top-left-radius: 0.25rem;
            border-top-right-radius: 0.25rem;
            transition: background-color 0.3s, color 0.3s;
        }

        .tabs-section .nav-link:hover {
            background-color: #f8f9fa;
            border-color: #dee2e6 #dee2e6 #fff;
        }

        .tabs-section .tab-content {
            border: 1px solid #dee2e6;
            border-top: 0;
            padding: 15px;
        }

        .tabs-section .tab-pane {
            display: none;
        }

        .tabs-section .tab-pane.active {
            display: block;
        }
    </style>

</head>

<body>
    <div id="loader" class="loader"></div>
    <section class="faq">
        <div class="container">
            <a href="../template/homepage.html" class="back-link homepage-link">Homepage</a>
            <div class="row justify-content-center">
                <div class="col-xl-8 col-lg-8 text-center">
                    <div class="section-title">
                        <h1>Farm FEWtures NetLogo Simulation</h1>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xl-12 col-lg-12">
                    <div class="accordion" id="accordionExample">
                        <form id="MainForm">
                            <div class="row">
                                <div class="col-xl-6 col-lg-6">
                                    <!-- Agriculture Form -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseOne"
                                                    aria-expanded="false" aria-controls="collapseOne">
                                                    Form related to Agriculture
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseOne" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="form-container">
                                                    <label for="agriculture_note">Note: Do not change dropdown
                                                        values.</label>
                                                    <label for="corn_area_option">Options Available:</label>
                                                    <button id="buttonA1" style="margin-right: 5px;">Corn
                                                        Dominated</button>
                                                    <button id="buttonA2">Multi Crop</button>

                                                    <label for="corn_area">Corn Area:</label>
                                                    <select id="corn_area" name="corn_area">
                                                        <option value="150">150</option>
                                                        <option value="500" selected>500</option>
                                                    </select>
                                                    <br />

                                                    <label for="wheat_area">Wheat Area:</label>
                                                    <select id="wheat_area" name="wheat_area">
                                                        <option value="125" selected>125</option>
                                                        <option value="200">200</option>
                                                    </select>
                                                    <br />

                                                    <label for="soybeans_area">Soybeans Area:</label>
                                                    <select id="soybeans_area" name="soybeans_area">
                                                        <option value="0" selected>0</option>
                                                        <option value="200">200</option>
                                                    </select>
                                                    <br />

                                                    <label for="sg_area">SG Area:</label>
                                                    <select id="sg_area" name="sg_area">
                                                        <option value="125" selected>125</option>
                                                        <option value="200">200</option>
                                                    </select>
                                                    <br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Energy Form -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseTwo"
                                                    aria-expanded="false" aria-controls="collapseTwo">
                                                    Form related to Energy
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseTwo" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="form-container">
                                                    <label for="energy_note">Note: Do not change dropdown
                                                        values.</label>
                                                    <label for="energy_area_option">Options Available:</label>
                                                    <button id="lessButton" class="option-button active"
                                                        style="margin-right: 5px;">Base Case</button>
                                                    <button id="moderateButton" class="option-button"
                                                        style="margin-right: 5px;">Inc Wind Factor</button>
                                                    <button id="mostButton" class="option-button"
                                                        style="margin-right: 5px;">Inc Energy Value</button>
                                                    <button id="mostSunButton" class="option-button"
                                                        style="margin-right: 5px;">Inc Sun hrs</button>

                                                    <label for="energy_value">Energy Value ($/MWh):</label>
                                                    <select id="energy_value" name="energy_value">
                                                        <option value="38.0">38.0</option>
                                                        <option value="45.0">45.0</option>
                                                    </select>
                                                    <br />

                                                    <label for="loan_term">Loan Term (Years):</label>
                                                    <input type="text" id="loan_term" name="loan_term" value="1.0"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="interest">Interest (%):</label>
                                                    <input type="text" id="interest" name="interest" value="3.0"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="num_wind_turbines">Number of Wind Turbines (#):</label>
                                                    <input type="text" id="num_wind_turbines" name="num_wind_turbines"
                                                        value="4" readonly class="readonly-input">
                                                    <br />

                                                    <label for="nyear_w">Number of years (Wind):</label>
                                                    <input type="text" id="nyear_w" name="nyear_w" value="30" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="capacity_w">Capacity (Wind) (MW):</label>
                                                    <input type="text" id="capacity_w" name="capacity_w" value="2"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="cost_w">Cost (Wind) ($/kW):</label>
                                                    <input type="text" id="cost_w" name="cost_w" value="1350" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="degrade_w">Degrade (Wind) (%/Yr):</label>
                                                    <input type="text" id="degrade_w" name="degrade_w" value="1.0"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="wind_factor">Wind Factor (%):</label>
                                                    <select id="wind_factor" name="wind_factor">
                                                        <option value="25">25</option>
                                                        <option value="42">42</option>
                                                    </select>
                                                    <br />

                                                    <label for="num_panel_sets">Number of Panel Sets (1 set = 1,000
                                                        panels):</label>
                                                    <input type="text" id="num_panel_sets" name="num_panel_sets"
                                                        value="8" readonly class="readonly-input">
                                                    <br />

                                                    <label for="nyear_s">Number of years (Solar) (Years):</label>
                                                    <input type="text" id="nyear_s" name="nyear_s" value="25" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="cost_s">Cost (Solar) ($/kW):</label>
                                                    <input type="text" id="cost_s" name="cost_s" value="1100" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="capacity_s">Capacity (Solar) (W):</label>
                                                    <input type="text" id="capacity_s" name="capacity_s" value="250"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="degrade_s">Degrade (Solar) (%/yr):</label>
                                                    <input type="text" id="degrade_s" name="degrade_s" value="1.0"
                                                        readonly class="readonly-input">
                                                    <br />

                                                    <label for="sun_hrs">Sun Hours (hrs/day):</label>
                                                    <select id="sun_hrs" name="sun_hrs">
                                                        <option value="6.0">6.0</option>
                                                        <option value="8.0">8.0</option>
                                                    </select>
                                                    <br />

                                                    <label for="ptc_w">PTC (Wind) ($/kWh):</label>
                                                    <input type="text" id="ptc_w" name="ptc_w" value="0.03" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="itc_s">ITC (Solar) (%):</label>
                                                    <input type="text" id="itc_s" name="itc_s" value="30" readonly
                                                        class="readonly-input">
                                                    <br />

                                                    <label for="ptc_s">PTC (Solar) ($/kWh):</label>
                                                    <input type="text" id="ptc_s" name="ptc_s" value="0.03" readonly
                                                        class="readonly-input">
                                                    <br />
                                                    <p>
                                                        <strong>Note:</strong> Relative to Phetheet et al. (2001a,b),
                                                        value for <strong>Cost (Wind)</strong> was changed from
                                                        <strong>1470 $/kW</strong> to <strong>1350 $/kW</strong> and
                                                        <strong>Cost (Solar)</strong> was changed from <strong>1750
                                                            $/kW</strong> to <strong>1100 $/kW</strong>. The newer
                                                        values reflect price conditions as of <strong>2024</strong>
                                                        (<strong>Xuebo Liu, oral commun, 2024</strong>).
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Climate Form -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseThree"
                                                    aria-expanded="false" aria-controls="collapseThree">
                                                    Form related to Climate
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapseThree" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="form-container">
                                                    <label for="climate_note">Note: All options are available for
                                                        selection.</label>
                                                    <label for="future_processes">Future Process:</label>
                                                    <select id="future_processes" name="future_processes">
                                                        <option value="Repeat Historical">
                                                            Repeat Historical
                                                        </option>
                                                        <option value="Wetter Future">
                                                            Wetter Future
                                                        </option>
                                                        <option value="Dryer Future">Dryer Future</option>
                                                        <option value="GCM">GCM</option>
                                                    </select>
                                                    <br />

                                                    <label for="climate_model">For GCM (Climate Model):</label>
                                                    <select id="climate_model" name="climate_model">
                                                        <option value="RCP4.5">RCP4.5</option>
                                                        <option value="RCP8.5">RCP8.5</option>
                                                    </select>
                                                    <br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-6 col-lg-6">
                                    <!-- Water Form -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapse5"
                                                    aria-expanded="false" aria-controls="collapseOne">
                                                    Form related to Water
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse5" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="form-container">
                                                    <label>Note: No alternative options are available</label>
                                                    <label for="aquifier_level">Aquifier Level (ft):</label>
                                                    <input type="text" id="aquifier_level" name="aquifier_level"
                                                        value="200" readonly class="readonly-input">
                                                    <br />
                                                    <label for="min_aquifier_level">Min. Aquifier Level (ft):</label>
                                                    <input type="text" id="min_aquifier_level" name="min_aquifier_level"
                                                        value="30" readonly class="readonly-input">
                                                    <br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ammonia Form (NH3) -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapse6"
                                                    aria-expanded="false" aria-controls="collapseTwo">
                                                    Evaluation of Ammonia (NH3) available in the file
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse6" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <div class="form-container">
                                                    <input type="submit" value="Download CSV" id="download-button" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Submit and View Graphs -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapse7"
                                                    aria-expanded="false" aria-controls="collapseThree">
                                                    Submit to View the Graphs.
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse7" class="collapse" data-parent="#accordionExample">
                                            <div class="card-body">
                                                <label for="slider">Simulation Period : 2008 - 2098 [90 Yrs]</label>
                                                <div class="form-container">
                                                    <input type="submit" value="Calculate" id="calculate-button" />
                                                </div>
                                            </div>
                                            <div id="myModal" class="modal">
                                                <div class="modal-content">
                                                    <span class="close">&times;</span>
                                                    <p>Simulation run completed successfully! Please scroll down and
                                                        click on the relevant sections (Agriculture, Energy, Water, Farm
                                                        Net Income) to view the graphs.</p>
                                                </div>
                                            </div>

                                            <style>
                                                .modal {
                                                    display: none;
                                                    position: fixed;
                                                    z-index: 1;
                                                    left: 0;
                                                    top: 0;
                                                    width: 100%;
                                                    height: 100%;
                                                    overflow: auto;
                                                    background-color: rgb(0, 0, 0);
                                                    background-color: rgba(0, 0, 0, 0.4);
                                                }

                                                .modal-content {
                                                    background-color: #fefefe;
                                                    margin: 15% auto;
                                                    padding: 20px;
                                                    border: 1px solid #888;
                                                    width: 80%;
                                                }

                                                .close {
                                                    color: #aaa;
                                                    float: right;
                                                    font-size: 28px;
                                                    font-weight: bold;
                                                }

                                                .close:hover,
                                                .close:focus {
                                                    color: black;
                                                    text-decoration: none;
                                                    cursor: pointer;
                                                }
                                            </style>

                                            <script>
                                                document.getElementById('calculate-button').addEventListener('click', function () {
                                                    var modal = document.getElementById('myModal');
                                                    modal.style.display = 'block';
                                                });

                                                document.querySelector('.modal .close').addEventListener('click', function () {
                                                    var modal = document.getElementById('myModal');
                                                    modal.style.display = 'none';
                                                });

                                                window.addEventListener('click', function (event) {
                                                    var modal = document.getElementById('myModal');
                                                    if (event.target == modal) {
                                                        modal.style.display = 'none';
                                                    }
                                                });
                                            </script>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- New Tabs Section -->
                    <div class="tabs-section">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link" id="notes-users-tab" href="#notes-users" onclick="showTab(event, 'notes-users')" role="tab">Notes for Users</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="notes-circumstances-tab" href="#notes-circumstances" onclick="showTab(event, 'notes-circumstances')" role="tab">Notes for those who would like to run additional circumstances of FEWture Farms</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane" id="notes-users" role="tabpanel" style="display: none;">
                                <p>1. Agricultural income by crop: As noted by Phetheet et al. (2001a, p. 5), "...the
                                    Midwest USA is a large enough producer of global corn and sorghum to affect global
                                    prices (USDA, 2020). This means higher supplies during good weather years often
                                    depress prices and vice versa. Although western Kansas is a major wheat production
                                    area in the USA, it is not large enough to influence global prices." In FEWture
                                    Farms agricultural graphs, this largely explains why corn and sorghum crops remain
                                    profitable in years when production is low.</p>
                                <p>2. Crop Insurance: Effects of groundwater running out are simulated. Short-term,
                                    sporadic processes such as hail storms and other extreme weather events are not
                                    simulated. This explains why crop insurance income is absent during so many years.
                                </p>
                            </div>
                            <div class="tab-pane" id="notes-circumstances" role="tabpanel" style="display: none;">
                                <p>This Limited Runs version of FEWtures Farms is supported by a set of output files
                                    produced from a program called FEWCalc built using NetLogo version ***. The Limited
                                    Runs interface is produced by programs using *** and HTML.</p>
                                <p>The *** and HTML programs and data sets for the Limited Runs version of FEWture Farms
                                    are available at *** [GitHub site or where KUIT prefers]. These can be used to
                                    change the Limited Runs interface. Changes to the available runs require NetLogo
                                    runs, as described below.</p>
                                <p>The *** and HTML programs for the FEWCalc NetLogo program are available at the GitHub
                                    site *** [ or wherever the KUIT people want the programs to be]. Together the
                                    interface and FEWCalc program are referred to as FEWture Farms. NetLogo does not
                                    conform to recent web security protocols, so program download is required to obtain
                                    simulations not supported by the Limited Runs version of FEWture Farms. FEWture
                                    Farms can be downloaded as follows.</p>
                                <p>a. Download FEWCalc from the GitHub site *** [the site listed in Phetheet et al
                                    2021a,b]</p>
                                <p>b. Use the instruction at the GitHub site and the appendices of the Phetheet et al
                                    (2021a) article to load and run FEWCalc.</p>
                                <p>c. Download the interface from ***.</p>
                                <p>d. Do the following. ***set paths, anything else?</p>
                                <p>e. Use the interface to run FEWCalc. Access to the full range of variable values are
                                    now available.</p>
                            </div>
                        </div>
                    </div>

                    <!-- End of New Tabs Section -->

                </div>
            </div>
        </div>
    </section>
    <iframe src="../template/ChartWindow.html" width="100%" height="900" frameborder="0"></iframe>
    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="../static/NetlogoInputV1.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var futureProcessesSelect = document.getElementById('future_processes');
            var climateModelSelect = document.getElementById('climate_model');

            futureProcessesSelect.addEventListener('change', function () {
                if (this.value === 'GCM') {
                    climateModelSelect.removeAttribute('disabled');
                } else {
                    climateModelSelect.setAttribute('disabled', 'disabled');
                }
            });
        });

        document.getElementById('buttonA1').addEventListener('click', function () {
            document.getElementById('corn_area').value = 500;
            document.getElementById('wheat_area').value = 125;
            document.getElementById('soybeans_area').value = 0;
            document.getElementById('sg_area').value = 125;
            highlightButton('buttonA1');
        });

        document.getElementById('buttonA2').addEventListener('click', function () {
            document.getElementById('corn_area').value = 150;
            document.getElementById('wheat_area').value = 200;
            document.getElementById('soybeans_area').value = 200;
            document.getElementById('sg_area').value = 200;
            highlightButton('buttonA2');
        });

        function highlightButton(selectedButtonId) {
            document.getElementById('buttonA1').style.backgroundColor = selectedButtonId === 'buttonA1' ? '#FF69B4' : '';
            document.getElementById('buttonA2').style.backgroundColor = selectedButtonId === 'buttonA2' ? '#FF69B4' : '';
        }

        window.onload = function () {
            if (document.getElementById('corn_area').value == 500) {
                highlightButton('buttonA1');
            } else {
                highlightButton('buttonA2');
            }
        }

        document.getElementById('calculate-button').addEventListener('click', function () {
            var modal = document.getElementById('myModal');
            modal.style.display = 'block';
        });

        document.querySelector('.modal .close').addEventListener('click', function () {
            var modal = document.getElementById('myModal');
            modal.style.display = 'none';
        });

        window.addEventListener('click', function (event) {
            var modal = document.getElementById('myModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });
    </script>
    <script>
        function showTab(event, tabId) {
            event.preventDefault();
            document.querySelectorAll('.tab-pane').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`#${tabId}`).classList.add('active');

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }
    </script>
    <script>
        function showTab(event, tabId) {
            event.preventDefault();
            var tab = document.getElementById(tabId);
            var isActive = tab.style.display === 'block';

            var tabContent = document.querySelectorAll('.tab-pane');
            tabContent.forEach(function (tab) {
                tab.style.display = 'none';
            });

            var tabLinks = document.querySelectorAll('.nav-link');
            tabLinks.forEach(function (link) {
                link.classList.remove('active');
            });

            if (!isActive) {
                tab.style.display = 'block';
                event.currentTarget.classList.add('active');
            }
        }
    </script>

</body>

</html>